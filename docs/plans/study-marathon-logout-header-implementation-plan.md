# ログアウト機能 & 共通ヘッダー実装計画

本ドキュメントは、ログアウト機能のUI実装および全ページ共通ヘッダーの導入に関する実行計画です。

---

## 1. 概要

- **目的**
  - ユーザーが明示的にログアウトできるようにする。
  - 全ページ共通のヘッダーを導入し、ナビゲーションとログアウトボタンを配置する。

- **スコープ**
  - Thymeleaf Fragment による共通ヘッダー作成
  - ヘッダーへのログアウトボタン配置 (Spring Security連携)
  - 既存ページ (`/study-logs`, `/login` 等) へのヘッダー適用

- **完了条件**
  - 全ページの上部にヘッダーが表示されていること。
  - ログイン中のみ「ログアウト」ボタンが表示されること。
  - ログアウトボタン押下によりログアウト処理が実行され、`/login?logout` (またはトップ) に遷移すること。

---

## 2. 実装タスク

### 2-1. 共通ヘッダー(Fragment)の作成

- [x] H-01: `src/main/resources/templates/fragments` ディレクトリを作成
- [x] H-02: `header.html` を作成し、Thymeleaf Fragment (`th:fragment="header"`) を定義
  - [x] アプリケーション名（Study Marathon）の表示
  - [x] ログイン状態判定 (`sec:authorize="isAuthenticated()"`) による表示切り替え
    - [x] ログイン時: 「ログアウト」ボタンを表示
    - [x] 未ログイン時: 「ログイン」リンクなどを表示（任意）

### 2-2. ログアウトボタンの実装

- [x] H-10: ログアウトボタンを `<form>` タグで実装する
  - [x] `th:action="@{/logout}"`, `method="post"` を設定
  - [x] ボタンの見た目を整える（CSSは最低限でOK）

### 2-3. 既存ページへのヘッダー適用

- [x] H-20: `templates/auth/login.html` にヘッダーをインクルード (`th:replace`)
- [x] H-21: `templates/study_logs/index.html` にヘッダーをインクルード
- [x] H-22: その他ページ（`index.html`など）があれば同様に適用

---

## 3. 動作確認

- [x] H-30: ログイン状態で各ページを開き、ヘッダーとログアウトボタンが表示されるか確認
- [x] H-31: 未ログイン状態（ログイン画面など）で、ログアウトボタンが非表示になっているか確認
- [x] H-32: ログアウトボタンを押して、ログアウト完了メッセージが出るか確認

---

## 4. 振り返り

- [x] H-99: 実装完了後、本ドキュメントのチェックを更新する
