<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Header Fragment</title>
</head>
<body>

<div th:fragment="header">
    <header style="border-bottom: 1px solid #ccc; padding: 10px; display: flex; justify-content: space-between; align-items: center;">
        <!-- アプリケーション名 -->
        <div style="font-weight: bold; font-size: 1.2em;">
            <a th:href="@{/}" style="text-decoration: none; color: #333;">Study Marathon</a>
        </div>

        <!-- ナビゲーション -->
        <div>
            <!-- 未ログイン時: ログインページへのリンク -->
            <span sec:authorize="!isAuthenticated()">
                <a th:href="@{/login}" style="margin-left: 10px;">ログイン</a>
            </span>

            <!-- ログイン時: ユーザー名表示 & ログアウトボタン -->
            <span sec:authorize="isAuthenticated()">
                <span style="margin-right: 10px;">
                    Login as: <span sec:authentication="name">User</span>
                </span>
                
                <!-- ログアウトボタン (POSTフォーム) -->
                <form th:action="@{/logout}" method="post" style="display: inline;">
                    <button type="submit" style="cursor: pointer;">ログアウト</button>
                </form>
            </span>
        </div>
    </header>
</div>

</body>
</html>
