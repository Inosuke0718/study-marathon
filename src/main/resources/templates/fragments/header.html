<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Header Fragment</title>
</head>
<body>

<div th:fragment="header">
    <header class="bg-white border-b-2 border-black sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <!-- アプリケーション名 -->
            <div class="font-black text-2xl tracking-tighter transform hover:scale-105 transition-transform">
                <a th:href="@{/}" class="text-black no-underline flex items-center gap-2">
                    <span class="bg-brand-blue text-white px-2 py-1 border-2 border-black shadow-neo-sm">SM</span>
                    Study Marathon
                </a>
            </div>

            <!-- ナビゲーション -->
            <div class="font-bold">
                <!-- 未ログイン時: ログインページへのリンク -->
                <span sec:authorize="!isAuthenticated()">
                    <a th:href="@{/login}" class="neo-btn bg-brand-orange text-white px-6 py-2 rounded-none hover:bg-orange-600 no-underline">
                        START LOGIN
                    </a>
                </span>

                <!-- ログイン時: ユーザー名表示 & ログアウトボタン -->
                <span sec:authorize="isAuthenticated()" class="flex items-center gap-4">
                    <span class="hidden md:inline-block bg-gray-100 border-2 border-black px-3 py-1 shadow-neo-sm">
                        Login as: <span sec:authentication="name" class="text-brand-blue">User</span>
                    </span>
                    
                    <!-- ログアウトボタン (POSTフォーム) -->
                    <form th:action="@{/logout}" method="post" class="inline">
                        <button type="submit" class="neo-btn bg-gray-200 text-black px-4 py-2 hover:bg-gray-300">
                            LOGOUT
                        </button>
                    </form>
                </span>
            </div>
        </div>
    </header>
</div>

</body>
</html>
